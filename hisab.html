<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶∞‡¶æ‡¶ñ‡¶æ</title>

  <style>
    /* ... (‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ CSS ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§ ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá) ... */

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: #f5f7fa;
    }

    /* Navbar */
    .navbar {
      display: flex;
      align-items: center;
      justify-content: center;
      background: white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      padding: 15px 20px;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 10;
    }

    .menu-icon {
      position: absolute;
      left: 20px;
      font-size: 24px;
      cursor: pointer;
      user-select: none;
    }

    .navbar h1 {
      font-size: 22px;
      margin: 0;
      font-weight: 700;
    }

    /* Sidebar */
    .sidebar {
      position: fixed;
      top: 65px;
      left: -260px;
      width: 230px;
      height: 100%;
      background: #9CC6ED;
      transition: 0.3s;
      padding-top: 20px;
      z-index: 9;
    }
    
    
        .sidebar.open {
      left: 0;
    }

    .sidebar a {
      display: block;
      padding: 15px 20px;
      color: black;
      text-decoration: none;
      font-size: 16px;
      transition: 0.2s;
    }

    .sidebar a:hover {
      background: #87b8e0;
    }

    /* Main content */
    .main-content {
      margin-top: 90px;
      padding: 20px;
    }

    /* Grid layout */
    .cards-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
    }

    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.08);
      padding: 20px;
      text-align: center;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 10px rgba(0,0,0,0.12);
    }

    .card h3 {
      margin: -8px;
      font-size: 16px;
      color: #ffff;
      font-weight: 600;
      text-align: center;
    }

    .card p {
      margin-top: 18px;
      font-size: 18px;
      font-weight: bold;
      color: #ffff;
    }

@media (max-width: 768px) {
  .cards-container {
    grid-template-columns: repeat(3, 1fr);
  }

  .card {
    min-height: 20px;
    max-height: 80px;
    padding: 8px 10px;
  }

  .card h3 {
    font-size: 10px;
  }

  .card p {
    font-size: 22px;
  }
}

    .card1 { background: linear-gradient(135deg, #4CAF50, #81C784); color: white; }
    .card2 { background: linear-gradient(135deg, #2196F3, #64B5F6); color: white; }
    .card3 { background: linear-gradient(135deg, 
      #F44336, #E57373); color: white; }
    .card4 { background: linear-gradient(135deg, #9C27B0, #BA68C8); color: white; }
    .card5 { background: linear-gradient(135deg, 
      #FF9800, #FFB74D); color: white; }
    .card6 { background: linear-gradient(135deg, #009688, #4DB6AC); color: white; }

    .cash-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 10px;
    }

 
 .cash-buttons button {
  border: none;
  border-radius: 8px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  color: white;
  transition: 0.3s;
}

/* ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ padding ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¶‡ßÅ‡¶á ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡ßá */
.cash-in-btn {
  background-color: #28a745;
  padding: 10px 67px; /* ‡¶°‡¶æ‡¶®‡ßá-‡¶¨‡¶æ‡¶Æ‡ßá ‡¶¨‡ßú */
}

.cash-in-btn:hover {
  background-color: #218838;
}

.cash-out-btn {
  background-color: #dc3545;
  padding: 10px 56px;
}

.cash-out-btn:hover {
  background-color: #b02a37;
}
 
 

    /* ‚úÖ ‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡¶æ popup form */
    .popup-form {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      padding-top: 0px;
      z-index: 9999;
    }

    .form-content {
      background: #fff;
      padding: 25px 30px;
      border-radius: 12px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      text-align: center;
      animation: popupFade 0.3s ease;
        
    }

    @keyframes popupFade {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .form-content input,
    .form-content select {
      display: block;
      width: 80%;
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 15px;
    }

    .form-content button {
      margin-top: 12px;
      padding: 8px 20px;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      color: white;
      background-color: #007bff;
      transition: 0.3s;
    }
    
    .form-content h1 {
  margin-bottom: 15px;
  font-size: 20px;
    padding: 20px 25px;   /* ‡¶â‡¶™‡¶∞‡ßá-‡¶®‡¶ø‡¶ö‡ßá 20px, ‡¶¨‡¶æ‡¶Æ‡ßá-‡¶°‡¶æ‡¶®‡ßá 25px */
}
.cashintext { color : green; }
.cashouttext { color : red; }


    .form-content button:hover {
      background-color: #0056b3;
}





/* ‡¶ü‡¶æ‡¶á‡¶™ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ */
.row-line-type {
  display: flex;
  align-items: center;
  margin-top: 10px;
  gap: 100px;
}
/* ‡¶õ‡ßã‡¶ü select */
.account-type-b {
  width: 200px!important;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
}
.account-type-a {
width: 200px!important;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
}


.row-line-time{
     display: flex;
  align-items: center;
  margin-top: 10px;
}
/* Date box */
.date-box {
  width: 200px!important;
  display: flex;
  align-items: center;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
  margin-left: auto;
  margin-right: -3px;
  gap: 40px;
}

.date-box input {
  display: none;
}
.date-box .icon {
  width: 35px;
  cursor: pointer;
}

/* Time Row */
.time-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 12px;
}
/* Time box */
.time-box {
  width: 200px;
  display: flex;
  align-items: center;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
  gap: 70px;
}

.time-box input {
  display: none;
}

.time-box .icon {
  width: 28px;
  cursor: pointer;
}





/* ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡¶®‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ */
.button-row {
    display: flex;
    justify-content: space-between; /* Cancel ‡¶¨‡¶æ‡¶Æ‡ßá, Save ‡¶°‡¶æ‡¶®‡ßá */
    width: 100%;
    margin-top: 15px;
}
.cancel-btn {
    background: #ff4d4d !important;
    color: white;
    padding: 12px 20px;
    font-size: 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    width: 35%;
    font-weight: bold;
    box-shadow: 0 3px 5px rgba(0,0,0,0.2);
    margin-right: 60px;
}
.save-btn {
    background: #007bff !important;
    color: white;
    padding: 12px 20px;
    font-size: 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    width: 35%;
    font-weight: bold;
    box-shadow: 0 3px 5px rgba(0,0,0,0.2);
    
}
.cancel-btn:hover {
    background: #e63939;
}
.save-btn:hover {
    background: #0063cc;
}   


    /* ======================================================= */
    /* === ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° CSS (‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶π‡ßá‡¶°‡¶æ‡¶∞ + ‡¶∞‡ßã + ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤) === */
    /* ======================================================= */

.show-box {
   padding: 0px;
   height: auto;
   width: 95%; 
   max-width: 580px;
   margin: 15px auto; 
   border-radius: 10px;
   background-color: #ffffff; 
   box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
   font-size: 18px;
   font-weight: bold;
   color: #00796b;
   text-align: center;
   
   /* ‚úÖ ‡¶Ö‡¶®‡ßÅ‡¶≠‡ßÇ‡¶Æ‡¶ø‡¶ï ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶π‡¶¨‡ßá */
   overflow-x: auto; 
   overflow-y: visible;
}
   
/* ================================
   ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶°‡¶æ‡¶®‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ Wrapper
================================ */
.table-wrapper {
    /* ‚úÖ ‡¶´‡¶ø‡¶ï‡ßç‡¶∏: ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡¶ï‡ßá ‡¶§‡¶æ‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶Æ‡ßã‡¶ü ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡ßÅ‡¶Ø‡ßã‡¶ó ‡¶¶‡¶ø‡¶® */
    display: block; 
    border-collapse: collapse;
    width: 100%; /* ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶§‡ßá‡¶á 100% ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• ‡¶®‡ßá‡¶¨‡ßá */
    border-radius: 8px;
}

/* ================================
   Header + Body Row ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤
================================ */
.transaction-table-header,
#transactionBody {
    display: table-row-group;
    height: auto !important;
    max-height: none;
    overflow-y: visible;
}

/* ================================
   Header Style
================================ */
.transaction-table-header {
    background-color: #1a4e69; 
    color: #fff;              
    font-size: 14px;
    font-weight: bold;
    z-index: 9;
    border-radius: 10px 10px 0 0;
    /* ‚úÖ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡¶ü‡¶ø ‡¶∞‡ßã-‡¶§‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá, ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶®‡ßá‡¶á */
}

/* ================================
   Header Cell ‡¶è‡¶¨‡¶Ç Body Cell ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤
================================ */
.transaction-table-header div,
.transaction-item div {
    display: table-cell; /* ‚úÖ Cell ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡ßá ‡¶Ü‡¶ö‡¶∞‡¶£ ‡¶ï‡¶∞‡¶¨‡ßá */
    padding: 12px 10px;
    white-space: nowrap;
    vertical-align: middle;
    height: 32px;
}


/* ================================
   ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø Row (transaction-item)
================================ */
.transaction-item {
    display: table-row; /* ‚úÖ Row ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡ßá ‡¶Ü‡¶ö‡¶∞‡¶£ ‡¶ï‡¶∞‡¶¨‡ßá */
    font-size: 14px;
    color: #000;
    border-bottom: 1px solid #ddd; /* ‚úÖ ‡¶°‡ßã‡¶∞‡¶æ ‡¶¶‡¶æ‡¶ó‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã */
}

/* ‡¶ï‡¶≤‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£ ‡¶è‡¶¨‡¶Ç ‡¶®‡¶Æ‡¶®‡ßÄ‡ßü‡¶§‡¶æ (Cell-‡¶è ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ) */

/* ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶Æ‡ßü (120px + 90px) */
.transaction-item div:nth-child(1) { width: 120px; } 
.transaction-item div:nth-child(2) { width: 90px; } 

/* ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ (150px + 150px) */
.transaction-item div:nth-child(3) { width: 150px; } 
.transaction-item div:nth-child(4) { width: 150px; } 

/* ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ ‡¶ï‡¶≤‡¶æ‡¶Æ (‡¶®‡¶Æ‡¶®‡ßÄ‡¶Ø‡¶º) */
.transaction-item div:nth-child(5) { 
    /* ‚úÖ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ ‡¶ï‡¶≤‡¶æ‡¶Æ: ‡¶®‡¶Æ‡¶®‡ßÄ‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßç‡¶∞‡¶∏‡¶æ‡¶∞‡¶ø‡¶§ ‡¶π‡¶¨‡ßá */
    width: auto; 
    min-width: 200px; /* ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• */
} 

/* ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (120px) ‡¶è‡¶¨‡¶Ç Action (70px) */
.transaction-item div:nth-child(6) { width: 120px; text-align: right; }
.transaction-item div:nth-child(7) { width: 70px; }


/* Header Cell ‡¶è‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ */
.transaction-table-header div:nth-child(1) { width: 120px; }
.transaction-table-header div:nth-child(2) { width: 90px; } 
.transaction-table-header div:nth-child(3) { width: 150px; } 
.transaction-table-header div:nth-child(4) { width: 150px; } 
.transaction-table-header div:nth-child(5) { width: auto; min-width: 200px; }
.transaction-table-header div:nth-child(6) { width: 120px; text-align: right; }
.transaction-table-header div:nth-child(7) { width: 70px; }


/* Amount color */
.amount-in { color: green; }
.amount-out { color: red; }

/* Row hover */
.transaction-item:hover {
    background: #f8f8f8;
}

/* Action buttons */
.action-buttons {
    display: flex;
    gap: 6px;
    align-items: center;
    justify-content: center;
}

.action-buttons button {
    border: none;
    padding: 5px 8px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 12px;
}

.edit-btn { background: #007bff; color: #fff; }
.delete-btn { background: #dc3545; color: #fff; }





    /* Amount color */
    .amount-in { color: green; }
    .amount-out { color: red; }


    /* Row hover */
    .transaction-item:hover {
        background: #f8f8f8;
    }

    /* Action buttons */
    .action-buttons {
        display: flex;
        gap: 6px;
        align-items: center;
        justify-content: center;
    }

    .action-buttons button {
        border: none;
        padding: 5px 8px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 12px;
    }

    .edit-btn { background: #007bff; color: #fff; }
    .delete-btn { background: #dc3545; color: #fff; }



/* ================================
   ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤
================================ */
.filter-controls {
    text-align: left; /* ‡¶¨‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶ï‡ßá ‡¶∏‡¶∞‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
    padding: 10px 10px 0 10px;
    width: 95%; 
    max-width: 580px;
    margin: 0 auto;
    display: flex; /* ‡¶ï‡¶≤‡¶æ‡¶Æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶è‡¶∞ ‡¶™‡¶æ‡¶∂‡ßá ‡¶∞‡¶æ‡¶ñ‡¶≤‡ßá ‡¶è‡¶ü‡¶ø ‡¶≤‡¶æ‡¶ó‡¶¨‡ßá */
    justify-content: space-between; /* ‡¶Ø‡¶¶‡¶ø ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶¨‡¶æ‡¶ü‡¶® ‡¶™‡¶æ‡¶∂‡ßá ‡¶•‡¶æ‡¶ï‡ßá */
    align-items: center;
}

#categoryFilter {
    padding: 8px 12px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 14px;
    margin-right: 10px; /* ‡¶ï‡¶≤‡¶æ‡¶Æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶¶‡ßÇ‡¶∞‡¶§‡ßç‡¶¨ */
    font-weight: 500;
    color: #333;
    min-width: 150px;
}




/* ================================
   ‡¶ï‡¶≤‡¶æ‡¶Æ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤
================================ */

.row-line-show {
  display: flex;
  align-items: center;
  margin-top: 10px;
  height: 70px;
}

.date-boxs {
     height: 45px;
     width: 110px!important;
     background-color: #e9f542;
     margin-left: 20px;
     margin-right: 1px;
     align-items: center;
     border-radius: 4px;
     align-items: center;
     display: flex;
     justify-content: center;
}   

/* ‚ùå ‡¶¨‡¶æ‡¶ü‡¶®‡¶ü‡¶ø‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
#clearDateBtn {
    background: none;
    border: 1px solid red;
    color: red; 
    border-radius: 4px;
    font-size: 14px;
    padding: 4px 8px;
    cursor: pointer;
    line-height: 1; 
    margin: 0;
    transition: background-color 0.2s;
}
#clearDateBtn:hover {
    background-color: rgba(255, 0, 0, 0.1);
}

.cg-select {
  background-color: #a5f57f;
  margin-left: 25px;
  border-radius: 4px;
  font-size: 8px;
  width: 50px!important;
  height: 45px;
  align-items: center;
}

.cash-select {
  background-color: skyblue;
  margin-left: 10px;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 14px;
  height: 45px;
  width: 180px;
  align-items: center;
}

.table-rejalt { 
  background-color: #ccc297;
  display: flex;
  margin-left: 20px;
  margin-right: 15px;
  border-radius: 4px;
  font-size: 14px;
  height: 45px;
  width: 200px;
  align-items: center;
  justify-content: center;
}




#toggleColumnsBtn {
    height: 45px;
    width: 80px;
    background-color: #007bff;
    color: white;
    border: none;
    margin-left: 20px;
    margin-right: 20px;
    border-radius: 6px;
    cursor: pointer;
    
    
}

.column-dropdown {
    display: none; /* ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶§‡ßá ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
    position: absolute;
    top: 45px;
    right: 10px;
    background-color: #fff;
    border: 1px solid #ddd;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    border-radius: 6px;
    padding: 10px;
    z-index: 1000;
    min-width: 150px;
    text-align: left;
}

.column-dropdown label {
    display: block;
    font-size: 14px;
    color: #333;
    padding: 5px 0;
    cursor: pointer;
    font-weight: normal; /* ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶π‡ßá‡¶°‡¶æ‡¶∞‡ßá‡¶∞ Bold ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶ì‡¶≠‡¶æ‡¶∞‡¶∞‡¶æ‡¶á‡¶° ‡¶ï‡¶∞‡¶§‡ßá */
}

.column-dropdown input[type="checkbox"] {
    margin-right: 8px;
}

/* ‡¶ï‡¶≤‡¶æ‡¶Æ ‡¶π‡¶æ‡¶á‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ CSS */
.hidden-col-1 div:nth-child(1),
.hidden-col-2 div:nth-child(2),
.hidden-col-3 div:nth-child(3),
.hidden-col-4 div:nth-child(4),
.hidden-col-5 div:nth-child(5),
.hidden-col-6 div:nth-child(6),
.hidden-col-7 div:nth-child(7) {
    display: none !important;
}





/* ===================================================
   ‚úÖ ‡¶™‡ßá‡¶ú‡¶ø‡¶®‡ßá‡¶∂‡¶® ‡¶è‡¶∞‡¶ø‡ßü‡¶æ (Wrapper for controls and page numbers)
   =================================================== */

.page-size-area {
    /* ‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶ö‡¶æ‡¶á‡¶≤‡ßç‡¶° ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡¶ï‡ßá ‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶¨‡¶ø‡¶™‡¶∞‡ßÄ‡¶§ ‡¶¶‡¶ø‡¶ï‡ßá ‡¶†‡ßá‡¶≤‡ßá ‡¶¶‡ßá‡¶¨‡ßá */
    display: flex;
    justify-content: space-between; 
    
    /* ‡¶â‡¶≤‡ßç‡¶≤‡¶Æ‡ßç‡¶¨‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá */
    align-items: center; 
    
    padding: 5px 15px;
    border-top: 1px solid #ddd;
    margin-top: 10px;
    
    /* ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßá‡¶® ‡¶™‡ßÅ‡¶∞‡ßã ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá */
    width: 100%; 
    box-sizing: border-box;
    max-width: 580px; /* ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶Æ‡¶û‡ßç‡¶ú‡¶∏‡ßç‡¶Ø ‡¶∞‡ßá‡¶ñ‡ßá ‡¶è‡¶á ‡¶Æ‡¶æ‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® */
    margin: 0 auto; 
}

/* --------------------------------------------------- */

/* ===================================================
   ‚úÖ ‡¶™‡ßá‡¶ú‡¶ø‡¶®‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶®‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ (.pagination-controls)
   =================================================== */
.pagination-controls {
    text-align: left; /* ‡¶¨‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶ï‡ßá ‡¶´‡¶ø‡¶ï‡ßç‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã */
    padding: 0;
    margin: 0; 
    /* ‡¶¨‡¶æ‡¶ü‡¶®‡¶ó‡ßÅ‡¶≤‡¶ø‡¶ï‡ßá ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá */
    display: flex; 
    gap: 3px;
}

/* ‡¶™‡ßá‡¶ú ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ó‡ßÅ‡¶≤‡¶ø‡¶∞ ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.pagination-controls .page-link {
    display: inline-block;
    padding: 5px 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    text-decoration: none;
    color: #444;
    font-size: 14px;
    transition: all 0.2s ease;
    cursor: pointer;
}

/* ‚úÖ ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶´‡¶ø‡¶ï‡ßç‡¶∏: ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º (Active) ‡¶™‡ßá‡¶ú‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
/* JS ‡¶è ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏: '.active-page' */
.pagination-controls .page-link.active-page {
    /* !important ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶Ø‡¶æ‡¶§‡ßá ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶è‡¶ü‡¶ø‡¶ï‡ßá ‡¶ì‡¶≠‡¶æ‡¶∞‡¶∞‡¶æ‡¶á‡¶° ‡¶®‡¶æ ‡¶ï‡¶∞‡ßá */
    background-color: #007bff !important; /* ‡¶â‡¶ú‡ßç‡¶ú‡ßç‡¶¨‡¶≤ ‡¶®‡ßÄ‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° */
    color: white !important; /* ‡¶≤‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∞‡¶Ç ‡¶∏‡¶æ‡¶¶‡¶æ */
    border-color: #007bff !important;
    font-weight: bold !important;
    
    /* ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶¨‡¶°‡¶º ‡¶ï‡¶∞‡¶§‡ßá */
    transform: scale(1.05) !important; 
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) !important;
    cursor: default; /* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶™‡ßá‡¶ú‡ßá ‡¶ï‡¶æ‡¶∞‡ßç‡¶∏‡¶∞ ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï-‡¶Ö‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá */
}

/* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶™‡ßá‡¶ú‡ßá hover ‡¶ì focus ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ (‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü ‡¶ß‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø) */
.pagination-controls .page-link.active-page:hover,
.pagination-controls .page-link.active-page:focus {
    background-color: #007bff !important;
    color: white !important;
}

/* ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶™‡ßá‡¶ú ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡ßá hover ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ (‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶®‡¶æ ‡¶π‡¶≤‡ßá) */
.pagination-controls .page-link:hover:not(.active-page) {
    background-color: #e9ecef;
}

/* ‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º (disabled) ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶® (<<, >> ‡¶Ø‡¶ñ‡¶® ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¨‡¶æ ‡¶∂‡ßá‡¶∑ ‡¶™‡ßá‡¶ú‡ßá ‡¶•‡¶æ‡¶ï‡ßá) */
.pagination-controls .page-link.disabled-nav {
    color: #ccc !important; /* ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡¶® */
    background-color: #f7f7f7 !important; /* ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ß‡ßÇ‡¶∏‡¶∞ */
    border-color: #ddd !important;
    cursor: default; /* ‡¶ï‡¶æ‡¶∞‡ßç‡¶∏‡¶∞‡¶ï‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï-‡¶Ö‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶® */
    pointer-events: none; /* ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶∞‡ßÇ‡¶™‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
}

/* ‡¶è‡¶≤‡¶ø‡¶™‡¶∏‡¶ø‡¶∏ (...) ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.ellipsis {
    padding: 5px 4px;
    color: #888;
    font-size: 14px;
}


/* --------------------------------------------------- */

/* ===================================================
   ‚úÖ ‡¶≤‡¶æ‡¶á‡¶® ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ (.page-size-control)
   =================================================== */
   
.page-size-control {
    font-size: 14px;
    color: #444;
    margin: 0; 
}

.page-size-control select {
    padding: 5px;
    border: 1px solid #ccc;
    border-radius: 5px;
    margin-left: 5px;
    font-size: 14px;
}
</style>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

</head>
<body>

  <div class="navbar">
    <span class="menu-icon" onclick="toggleSidebar()">‚ò∞</span>
    <h1>‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶∞‡¶æ‡¶ñ‡¶æ</h1>
  </div>

  <div id="sidebar" class="sidebar">
    <a href="index.html">üè† ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</a>
    <a href="hisab.html">üí∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶∞‡¶æ‡¶ñ‡¶æ</a>
    <a href="employee-list.html">üßë‚Äçü§ù‚Äçüßë Company People</a>
     <a href="invoice.html">üìë ‡¶¨‡¶ø‡¶≤ invoice</a>
  </div>

  <div class="main-content">
    <div class="cards-container">
      <div class="card card1"><p>‡ß≥ 0</p><h3>‡¶ú‡¶Æ‡¶æ ‡¶Ü‡¶õ‡ßá </h3></div>
      <div class="card card2"><p>‡ß≥ 0</p><h3>‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶ú‡¶Æ‡¶æ </h3></div>
      <div class="card card3"><p>‡ß≥ 0</p><h3>‡¶Ü‡¶ú‡¶ï‡ßá ‡¶ñ‡¶∞‡¶ö</h3></div>
      <div class="card card4"><p>‡ß≥ 0</p><h3>‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü ‡¶ú‡¶Æ‡¶æ</h3></div>
      <div class="card card5"><p>‡ß≥ 0</p><h3>Kingüè¶Bank</h3></div>
      <div class="card card6"><p>‡ß≥ 0</p><h3>‡¶Æ‡ßã‡¶ü ‡¶ã‡¶£</h3></div>
    </div>
  </div>

  <div class="cash-buttons">
    <button class="cash-in-btn" onclick="openForm('in')">üí∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶á‡¶® ‚ûï</button>
    <button class="cash-out-btn" onclick="openForm('out')">üí∏ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ü‡¶â‡¶ü ‚ûñ</button>
</div>
<div id="formContainer" class="popup-form" style="display:none;">

    <div id="formIn" class="form-content" style="display:none;">
    <h1 class="cashintext">‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶á‡¶®</h1>
    <div class="row-line-type">
       <select class="account-type-b" id="incategory"required>
  <option value="" disabled selected>Select</option>           <option>‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü üî¨</option>
            <option>üëúRRR Bazar</option>
            <option>‡¶ã‡¶® ‡¶®‡ßá‡¶ì‡ßü‡¶æü©∏</option>
        </select>
        
       <select class="account-type-b" id="inperson"required>
            <option>‡¶ú‡¶Æ‡¶æüí∞‡¶ï‡¶∞‡¶æ</option>
            <option>BANKüè¶DP</option>
        </select>        
      </div>
      
        <div class="row-line-time">
<div class="time-box">
        <span id="showTimeIn">--:-- AM</span> 
        <input type="time" id="timePickerIn"> 
        <img src="time.png" class="icon" onclick="openTime('In')"> 
</div>
      <div class="date-box">
    <span id="showDateIn">2025-11-14</span> 
    <input type="date" id="datePickerIn" style="opacity:0; position:absolute; pointer-events:none;"> 
    <img src="calendar.png" class="icon" onclick="openDate('In')"> 
</div>
</div>      
      
    <input type="number" id="inAmount" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
    <input type="text" id="inDescription" placeholder="‡¶¨‡¶ø‡¶¨‡¶∞‡¶£ ‡¶¶‡¶ø‡¶®">

    <div class="button-row">
        <button class="cancel-btn" 
          onclick="closeForm()">Cancel</button>
        <button class="save-btn" id="inSaveBtn" onclick="saveIn()">Save</button>
    </div>
</div>

<div id="formOut" class="form-content" style="display:none;">
        <h1 class="cashouttext">‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ü‡¶â‡¶ü</h1>
      <div class="row-line-type">
       <select class="account-type-a" id="outcategory"required>
    <option value="" disabled selected>Select</option>
            <option>‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞üõçÔ∏è‡¶∏‡¶¶‡¶æ‡¶á</option>
            <option>‡¶Ø‡¶æ‡¶§‡¶æ‡ßü‡¶æ‡¶§üöï‡¶ñ‡¶∞‡¶ö</option>
            <option>‡¶®‡¶æ‡¶∏‡ßç‡¶§‡¶æü•™,‡¶≤‡¶æ‡¶û‡ßç‡¶ö,üçú</option>
            <option>‡¶è‡¶ï‡ßç‡¶∏‡ßã‡¶∏‡ßá‡¶∞‡¶ø‡¶úüõí</option>
            <option>‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏üîß‡¶ï‡¶∏‡ßç‡¶ü</option>
            <option>‡¶ã‡¶® ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‚ôªÔ∏è</option> 
            <option>üíµSalaryüí∂</option>
        </select>
        
<select class="account-type-b" id="outperson" required>
    <option value="‡¶ú‡¶Æ‡¶æ ‡¶ü‡¶æ‡¶ï‡¶æüíµ">‡¶ú‡¶Æ‡¶æ ‡¶ü‡¶æ‡¶ï‡¶æüíµ</option>
    <option value="‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ïüî∞‡¶ö‡ßá‡¶ï">‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ïüî∞‡¶ö‡ßá‡¶ï</option>
    </select>
   </div>
   
   <div id="salaryEmployeeSelectContainer" style="display:none;">
    <select class="account-type-b" id="salaryEmployeeSelect" required>
        <option value="" disabled selected>‡¶ï‡¶æ‡¶∞ ‡¶¨‡ßá‡¶§‡¶®?</option>
        </select>
</div>

   

        <div class="row-line-time">
<div class="time-box">
        <span id="showTimeOut">--:-- AM</span> 
        <input type="time" id="timePickerOut"> 
        <img src="time.png" class="icon" onclick="openTime('Out')"> 
</div>
      <div class="date-box">
    <span id="showDateOut">2025-11-14</span> 
    <input type="date" id="datePickerOut" style="opacity:0; position:absolute; pointer-events:none;"> 
    <img src="calendar.png" class="icon" onclick="openDate('Out')"> 
</div>
</div>

        <input type="number" id="outAmount" placeholder="‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
        <input type="text" id="outDescription" placeholder="‡¶ñ‡¶∞‡¶ö‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£">
       
      </br>
        <div class="button-row">
          <button class="cancel-btn" 
          onclick="closeForm()">Cancel</button>
          <button class="save-btn" id="outSaveBtn" onclick="saveOut()">Save</button>
        </div>
    </div>

</div>  

<div class="Category-select">
  
</div>






<div class="row-line-show">

<div class="date-boxs">
<div id="dateFilterWrapper" class="date-filter-group">
    <button id="dateFilterBtn" class="filter-button" onclick="openDateRangeModal()">
        üìÖ  </button>
    
    <button id="clearDateBtn" onclick="clearDateRange()" style="display: none;">‚ùå</button>
</div>
</div>


<div id="dateRangeModal" class="popup-form" style="display:none;">
    <div class="form-content" style="max-width: 350px;">
        <h2 style="margin-top: 0;">‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶∞‡ßá‡¶û‡ßç‡¶ú ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
        
        <label for="startDateFilter">‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
        <input type="date" id="startDateFilter" style="margin-bottom: 15px;">

        <label for="endDateFilter">‡¶∂‡ßá‡¶∑ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
        <input type="date" id="endDateFilter">
        
        <div class="button-row" style="margin-top: 20px;">
            <button class="cancel-btn" onclick="document.getElementById('dateRangeModal').style.display='none'">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
            <button class="save-btn" onclick="setDateRangeAndFilter()">‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
    </div>
</div>




    <select class="cg-select" id="categoryFilter" onchange="filterByCategory()">
        <option value="all">‡¶∏‡¶¨üåç</option>
        <option value="IN_ONLY">üí∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶á‡¶®</option>
        <option value="OUT_ONLY">üí∏ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ü‡¶â‡¶ü</option>
        <option>‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞üõçÔ∏è‡¶∏‡¶¶‡¶æ‡¶á</option>
        <option>‡¶Ø‡¶æ‡¶§‡¶æ‡ßü‡¶æ‡¶§üöï‡¶ñ‡¶∞</option>
        <option>‡¶®‡¶æ‡¶∏‡ßç‡¶§‡¶æü•™,‡¶≤‡¶æ‡¶û‡ßç‡¶ö,üçú</option>
        <option>‡¶è‡¶ï‡ßç‡¶∏‡ßã‡¶∏‡ßá‡¶∞‡¶ø‡¶úüõí</option>
        <option>‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏üîß‡¶ï‡¶∏‡ßç‡¶ü</option>
        <option>‡¶ã‡¶® ‡¶®‡ßá‡¶ì‡ßü‡¶æü©∏</option>
        <option>‡¶ã‡¶® ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‚ôªÔ∏è</option>
        <option>üíµSalaryüí∂</option>
        </select>




  <div class="table-rejalt" >
     ‡ß≥ = 0
  </div>



<div class="column-toggle-container">
    <button id="toggleColumnsBtn">üëÅÔ∏è‚öôÔ∏è</button>
    
    <div id="columnDropdown" class="column-dropdown">
        <label><input type="checkbox" checked data-column="1"> ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</label>
        <label><input type="checkbox" checked data-column="2"> ‡¶∏‡¶Æ‡¶Ø‡¶º</label>
        <label><input type="checkbox" checked data-column="3"> ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</label>
        <label><input type="checkbox" checked data-column="4"> ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ</label>
        <label><input type="checkbox" checked data-column="5"> ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</label>
        <label><input type="checkbox" checked data-column="6"> ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</label>
        <label><input type="checkbox" checked data-column="7"> Action</label>
    </div>
</div>
</div>



<div class="table-wrapper">
    </div>

<div class="show-box">
    <div class="table-wrapper">
        <div class="transaction-table-header">
            <div class="th-date">‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</div>
            <div class="th-time">‡¶∏‡¶Æ‡ßü</div>
            <div class="th-category">‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</div>
            <div class="th-person">‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ</div>
            <div class="th-details">‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</div>
            <div class="th-amount">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</div>
            <div class="th-action">Action</div>
        </div>
        <div id="transactionBody"></div>
    </div>
</div>




<div class="page-size-area">
    
    <div class="pagination-controls">
        
        <a href="#" class="page-link active">1</a> 
        
        <a href="#" class="page-link">2</a>
        <a href="#" class="page-link">3</a>
        <a href="#" class="page-link">4</a>
        <a href="#" class="page-link">5</a>
        <a href="#" class="page-link">>></a>
        
    </div>

    <div class="page-size-control">
        
        <select id="rowsPerPageSelect" onchange="changeRowsPerPage(this.value)">
            <option value="10" selected>10</option>
            <option value="20">20</option>
            <option value="50">50</option>
            <option value="100">100</option>
        </select>
    </div>
</div>

<script>
// =======================================================
// === ‡ßß. ‡¶´‡¶æ‡ßü‡¶æ‡¶∞‡¶¨‡ßá‡¶ú ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® ‡¶ì ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶® (‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶ø‡¶§) ===
// =======================================================
const firebaseConfig = {
  apiKey: "AIzaSyDB9ZXgG1S0Io2OqJc50DkTJotraHJ6tsA",
  authDomain: "kingfishar-data.firebaseapp.com",
  databaseURL: "https://kingfishar-data-default-rtdb.firebaseio.com",
  projectId: "kingfishar-data",
  storageBucket: "kingfishar-data.firebasestorage.app",
  messagingSenderId: "799117473038",
  appId: "1:799117473038:web:36e73039a1f36a1195535f",
  measurementId: "G-TLH6L18170"
};

let database; 
let transactionsRef;

// Firebase ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶®
if (typeof firebase !== 'undefined') {
    try {
        const app = firebase.initializeApp(firebaseConfig);
        database = app.database();
        transactionsRef = database.ref('transactions'); 
        
        // Server Value ‡¶™‡¶æ‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ü‡¶ø ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞
        window.firebaseServerTimestamp = firebase.database.ServerValue.TIMESTAMP;
        console.log("Firebase initialized successfully.");
    } catch (e) {
        console.error("Firebase Initialization Error:", e);
        alert("Firebase ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§");
    }
} else {
    console.error("Firebase SDK ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ HTML-‡¶è <script> ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
}


// =======================================================
// === ‡ß®. ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶°‡ßá‡¶ü‡¶æ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶ì ‡¶ï‡¶®‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü‡¶∏ (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡ßü‡¶®‡¶ø) ===
// =======================================================

const OUT_CATEGORIES = [
    '‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞üõçÔ∏è‡¶∏‡¶¶‡¶æ‡¶á', '‡¶Ø‡¶æ‡¶§‡¶æ‡ßü‡¶æ‡¶§üöï‡¶ñ‡¶∞‡¶ö', '‡¶®‡¶æ‡¶∏‡ßç‡¶§‡¶æü•™,‡¶≤‡¶æ‡¶û‡ßç‡¶ö,üçú', 
    '‡¶è‡¶ï‡ßç‡¶∏‡ßã‡¶∏‡ßá‡¶∞‡¶ø‡¶úüõí', '‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏üîß‡¶ï‡¶∏‡ßç‡¶ü', '‡¶ã‡¶® ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‚ôªÔ∏è', 'üíµSalaryüí∂'
];
const OUT_PERSONS = [
    '‡¶ú‡¶Æ‡¶æ ‡¶ü‡¶æ‡¶ï‡¶æüíµ', '‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ïüî∞‡¶ö‡ßá‡¶ï'
];

const IN_CATEGORIES_HTML = ['‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü üî¨', 'üëúRRR Bazar', '‡¶ã‡¶® ‡¶®‡ßá‡¶ì‡ßü‡¶æü©∏']; 
const IN_PERSONS_HTML = ['‡¶ú‡¶Æ‡¶æüí∞‡¶ï‡¶∞‡¶æ', 'BANKüè¶DP']; 

const kingBankCategory = 'BANKüè¶DP';
const cashOutPerson = '‡¶ú‡¶Æ‡¶æ ‡¶ü‡¶æ‡¶ï‡¶æüíµ'; 
const bankOutPerson = '‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ïüî∞‡¶ö‡ßá‡¶ï';
const loanTakenCategory = '‡¶ã‡¶® ‡¶®‡ßá‡¶ì‡ßü‡¶æü©∏';
const loanGivenCategory = '‡¶ã‡¶® ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‚ôªÔ∏è';


// =======================================================
// === ‡ß©. ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤‡¶∏, ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶ì ‡¶™‡ßá‡¶ú‡¶ø‡¶®‡ßá‡¶∂‡¶® ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ (‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá) ===
// =======================================================

// Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá, ‡¶§‡¶æ‡¶á localStorage ‡¶¨‡¶æ‡¶¶
let transactions = []; 
const today = new Date().toISOString().substring(0, 10);

let rowsPerPage = 10; 
let currentPage = 1;

let isEditingIndex = null; 

let startDate = null; 
let endDate = null; 

// **‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶® ‡ß®:** EMPLOYEES_LIST ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤‡¶ø ‡¶ò‡ßã‡¶∑‡¶£‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
let EMPLOYEES_LIST = []; 


// Employee List Loading - ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡¶Ø‡¶º‡¶®‡¶ø
function loadEmployeesFromDatabase() {
    // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ employee list ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá
    const employeesJson = localStorage.getItem('employees');
    const allEmployees = employeesJson ? JSON.parse(employeesJson) : [];
    return allEmployees.map(emp => ({
        id: emp.id,
        name: emp.name,
        salary: parseFloat(emp.salary) || 0 
    }));
}


// =======================================================
// === ‡ß™. ‡¶∏‡¶æ‡¶á‡¶°‡¶¨‡¶æ‡¶∞, ‡¶´‡¶∞‡ßç‡¶Æ ‡¶ì‡¶™‡ßá‡¶®/‡¶ï‡ßç‡¶≤‡ßã‡¶ú ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶á‡¶Æ/‡¶°‡ßá‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡ßü‡¶®‡¶ø) ===
// =======================================================

function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('open');
}

document.querySelectorAll('.sidebar a').forEach(link => {
    link.addEventListener('click', () => {
        document.getElementById('sidebar').classList.remove('open');
    });
});


function openForm(type) {
    const formContainer = document.getElementById("formContainer");
    if (!formContainer) {
        console.error("HTML Error: formContainer ID not found.");
        return;
    }
    formContainer.style.display = "flex";
    
    const TypeCapital = type === 'in' ? 'In' : 'Out';

    if (type === "in") {
        document.getElementById("formIn").style.display = "block";
        document.getElementById("formOut").style.display = "none";
    } else {
        document.getElementById("formIn").style.display = "none";
        document.getElementById("formOut").style.display = "block";
    }
    
    // ‡¶®‡¶§‡ßÅ‡¶® ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶π‡¶≤‡ßá ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ
    if (isEditingIndex === null) {
        document.getElementById('inAmount').value = ''; 
        document.getElementById('inDescription').value = ''; 
        document.getElementById('outAmount').value = ''; 
        document.getElementById('outDescription').value = ''; 
        
        const inSaveBtn = document.getElementById('inSaveBtn');
        if (inSaveBtn) inSaveBtn.innerText = 'Save';
        const outSaveBtn = document.getElementById('outSaveBtn');
        if (outSaveBtn) outSaveBtn.innerText = 'Save';
        
        setAutoTime(TypeCapital);

        const inCategorySelect = document.getElementById('incategory');
        if (inCategorySelect) { inCategorySelect.selectedIndex = inCategorySelect.options.length > 1 ? 1 : 0; }
        const inPersonSelect = document.getElementById('inperson');
        if (inPersonSelect) { inPersonSelect.value = '‡¶ú‡¶Æ‡¶æüí∞‡¶ï‡¶∞‡¶æ'; }
        
        const outCategorySelect = document.getElementById('outcategory');
        if (outCategorySelect) { outCategorySelect.selectedIndex = outCategorySelect.options.length > 1 ? 1 : 0; }
        const outPersonSelect = document.getElementById('outperson');
        if (outPersonSelect) { outPersonSelect.value = cashOutPerson; } 
        
        if (type === 'out') toggleSalaryEmployeeSelect();
    }
}


function closeForm() {
    document.getElementById("formContainer").style.display = "none";
    document.getElementById("formIn").style.display = "none";
    document.getElementById("formOut").style.display = "none";
    
    isEditingIndex = null;
    
    const inSaveBtn = document.getElementById('inSaveBtn');
    if (inSaveBtn) inSaveBtn.innerText = 'Save';
    const outSaveBtn = document.getElementById('outSaveBtn');
    if (outSaveBtn) outSaveBtn.innerText = 'Save';
    
    const employeeSelectContainer = document.getElementById('salaryEmployeeSelectContainer');
    if (employeeSelectContainer) employeeSelectContainer.style.display = 'none';
    
    const inCategorySelect = document.getElementById('incategory');
    if (inCategorySelect) { inCategorySelect.selectedIndex = inCategorySelect.options.length > 1 ? 1 : 0; }
    const inPersonSelect = document.getElementById('inperson');
    if (inPersonSelect) { inPersonSelect.selectedIndex = inPersonSelect.options.length > 1 ? 1 : 0; }
    const outCategorySelect = document.getElementById('outcategory');
    if (outCategorySelect) { outCategorySelect.selectedIndex = outCategorySelect.options.length > 1 ? 1 : 0; }
    const outPersonSelect = document.getElementById('outperson');
    if (outPersonSelect) { outPersonSelect.value = cashOutPerson; } 
}  


function setAutoTime(type) {
    const now = new Date();
    let hour = now.getHours();
    let minute = now.getMinutes();
    const today = now.toISOString().substring(0, 10);

    minute = minute < 10 ? "0" + minute : minute;
    let ampm = hour >= 12 ? "PM" : "AM";
    let showHour = hour % 12 || 12;

    document.getElementById(`showTime${type}`).innerText = `${showHour}:${minute} ${ampm}`;
    document.getElementById(`showDate${type}`).innerText = today;

    document.getElementById(`timePicker${type}`).value = 
        now.toISOString().substring(11, 16);
    document.getElementById(`datePicker${type}`).value = today;
}
function openTime(type) {
    const timeInput = document.getElementById(`timePicker${type}`);
    if (timeInput && timeInput.showPicker) timeInput.showPicker();
    else if (timeInput) timeInput.click();
}
function openDate(type) {
    const dateInput = document.getElementById(`datePicker${type}`);
    if (dateInput && dateInput.showPicker) dateInput.showPicker();          
    else if (dateInput) dateInput.click();          
}

const timePickerIn = document.getElementById("timePickerIn");
if(timePickerIn) timePickerIn.addEventListener("change", function () {
    let [hour, minute] = this.value.split(":");
    hour = parseInt(hour);
    let ampm = hour >= 12 ? "PM" : "AM";
    let showHour = hour % 12 || 12;
    document.getElementById("showTimeIn").innerText = `${showHour}:${minute} ${ampm}`;
});

const timePickerOut = document.getElementById("timePickerOut");
if(timePickerOut) timePickerOut.addEventListener("change", function () {
    let [hour, minute] = this.value.split(":");
    hour = parseInt(hour);
    let ampm = hour >= 12 ? "PM" : "AM";
    let showHour = hour % 12 || 12;
    document.getElementById("showTimeOut").innerText = `${showHour}:${minute} ${ampm}`;
});

const datePickerIn = document.getElementById("datePickerIn");
if(datePickerIn) datePickerIn.addEventListener("change", function () {
    document.getElementById("showDateIn").innerText = this.value;
});

const datePickerOut = document.getElementById("datePickerOut");
if(datePickerOut) datePickerOut.addEventListener("change", function () {
    document.getElementById("showDateOut").innerText = this.value;
});


// =======================================================
// === ‡ß´. ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶ì ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡ßü‡¶®‡¶ø) ===
// =======================================================
function calculateAndDisplayBalance() {
    let totalOut = 0;   
    let totalInToday = 0;
    let totalOutToday = 0;
    let totalInCash = 0;  
    let totalKingBank = 0;  
    let totalLoan = 0;
    
    const loanTakenCategory = '‡¶ã‡¶® ‡¶®‡ßá‡¶ì‡ßü‡¶æü©∏';
    const loanGivenCategory = '‡¶ã‡¶® ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‚ôªÔ∏è';

    transactions.forEach(t => {
        if (t.type === 'in') {
            if (t.person === kingBankCategory) { 
                totalKingBank += t.amount; 
            } else {
                totalInCash += t.amount;   
            }
        } 
        else if (t.type === 'out') {
            totalOut += t.amount;
            
           if (t.person === bankOutPerson) {
                totalKingBank -= t.amount; 
            }
        }   
        
        if (t.type === 'in' && t.category === loanTakenCategory) {
            totalLoan += t.amount;  
        }
        if (t.type === 'out' && t.category === loanGivenCategory) {
            totalLoan -= t.amount; 
        }

        if (t.date === today) {
            if (t.type === 'in' && t.person !== kingBankCategory) { 
                totalInToday += t.amount;
            } 
            else if (t.type === 'out') {
                totalOutToday += t.amount;
            }
        }
    });
    
    let totalCashOutFromCash = transactions
        .filter(t => t.type === 'out' && t.person === cashOutPerson)
        .reduce((sum, t) => sum + t.amount, 0);

    let netBalance = totalInCash - totalCashOutFromCash; 
    const totalDeposit = totalInCash + totalKingBank; 

    const card1 = document.querySelector('.card1 p');
    if(card1) card1.innerText = `‡ß≥ ${netBalance.toFixed(0)}`;     
    const card2 = document.querySelector('.card2 p');
    if(card2) card2.innerText = `‡ß≥ ${totalInToday.toFixed(0)}`;   
    const card3 = document.querySelector('.card3 p');
    if(card3) card3.innerText = `‡ß≥ ${totalOutToday.toFixed(0)}`;  
    const card4 = document.querySelector('.card4 p');
    if(card4) card4.innerText = `‡ß≥ ${totalDeposit.toFixed(0)}`;   
    const card5 = document.querySelector('.card5 p');
    if(card5) card5.innerText = `‡ß≥ ${totalKingBank.toFixed(0)}`;  
    const card6 = document.querySelector('.card6 p');
    if(card6) card6.innerText = `‡ß≥ ${totalLoan.toFixed(0)}`;      
}


// =======================================================
// === ‡ß¨. ‡¶∏‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡¶ø ‡¶°‡ßç‡¶∞‡¶™‡¶°‡¶æ‡¶â‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡ßü‡¶®‡¶ø) ===
// =======================================================

function populateSalaryEmployeeSelect() {
    const select = document.getElementById('salaryEmployeeSelect');
    if (!select) return;

    select.innerHTML = '<option value="" disabled selected>‡¶ï‡¶æ‡¶∞ ‡¶¨‡ßá‡¶§‡¶®?</option>';

    EMPLOYEES_LIST.forEach(employee => {
        const option = document.createElement('option');
        option.value = employee.id; 
        option.textContent = `${employee.name} (‡ß≥${employee.salary.toLocaleString('bn-BD')})`; 
        select.appendChild(option);
    });
}

function toggleSalaryEmployeeSelect() {
    const outCategorySelect = document.getElementById('outcategory');
    const employeeSelectContainer = document.getElementById('salaryEmployeeSelectContainer');
    const employeeSelect = document.getElementById('salaryEmployeeSelect');
    
    if (!employeeSelectContainer || !employeeSelect) return;

    if (outCategorySelect.value === 'üíµSalaryüí∂') {
        employeeSelectContainer.style.display = 'block';
        employeeSelect.setAttribute('required', 'required'); 
    } else {
        employeeSelectContainer.style.display = 'none';
        employeeSelect.removeAttribute('required');
    }
}


// =======================================================
// === ‡ß≠. ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞‡¶ø‡¶Ç, ‡¶∏‡¶∞‡ßç‡¶ü‡¶ø‡¶Ç, ‡¶∏‡ßá‡¶≠, ‡¶è‡¶°‡¶ø‡¶ü, ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶∏‡ßá‡¶≠ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá) ===
// =======================================================
  
function getTransactionSortKey(t) {
    if (!t.date || !t.time) {
        return t.timestamp || 0; 
    }

    let time24hr;
    let [timeStr, ampm] = t.time.split(' '); 
    
    if (ampm) { 
        let [hour, minute] = timeStr.split(':');
        hour = parseInt(hour);
        minute = parseInt(minute);
        if (ampm === 'PM' && hour !== 12) hour += 12;
        if (ampm === 'AM' && hour === 12) hour = 0; 
        
        time24hr = `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;
    } else {
        time24hr = t.time.substring(0, 5);
    }

    const dateTimeStr = `${t.date}T${time24hr}:00`;
    const timestamp = new Date(dateTimeStr).getTime();
    
    return isNaN(timestamp) ? t.timestamp || 0 : timestamp;
}

function getFilteredTransactions() {
    const selectedCategory = document.getElementById('categoryFilter') ? document.getElementById('categoryFilter').value : 'all';
    
    const dateFilterBtn = document.getElementById('dateFilterBtn');
    const startDateVal = dateFilterBtn ? dateFilterBtn.dataset.startDate || '' : '';
    const endDateVal = dateFilterBtn ? dateFilterBtn.dataset.endDate || '' : '';
    
    const startDate = startDateVal ? new Date(startDateVal + 'T00:00:00').getTime() : 0;
    const endDate = endDateVal ? new Date(endDateVal + 'T23:59:59').getTime() : Infinity;

    let allTransactions = [...transactions];
    
    let filteredTransactions = allTransactions.filter(t => {
        let categoryMatch = false; 
        
        if (selectedCategory === 'IN_ONLY') {
            categoryMatch = t.type === 'in'; 
        } else if (selectedCategory === 'OUT_ONLY') {
            categoryMatch = t.type === 'out'; 
        } else if (selectedCategory === 'all') {
            categoryMatch = true; 
        } else {
            categoryMatch = t.category === selectedCategory;
        }

        const transactionDate = t.date ? new Date(t.date + 'T00:00:00').getTime() : 0;
        const dateMatch = transactionDate >= startDate && transactionDate <= endDate;

        return categoryMatch && dateMatch; 
    });

    filteredTransactions.sort((a, b) => {
        const timestampA = getTransactionSortKey(a);
        const timestampB = getTransactionSortKey(b);
        
        if (timestampB !== timestampA) {
            return timestampB - timestampA;
        }
        
        // ‡¶Ø‡¶¶‡¶ø ‡¶°‡ßá‡¶ü/‡¶ü‡¶æ‡¶á‡¶Æ ‡¶è‡¶ï‡¶á ‡¶π‡¶Ø‡¶º, ‡¶§‡¶¨‡ßá Firebase timestamp ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
        return b.timestamp - a.timestamp; 
    });
    
    return filteredTransactions;
}
   
function applyFilters() {
    currentPage = 1; 
    displayTransactions(); 
    setupPagination();
    updateResultAmount(); 
}


function updateResultAmount() {
    const filtered = getFilteredTransactions();
    let totalAmount = 0;
    
    const selectedCategory = document.getElementById('categoryFilter') ? document.getElementById('categoryFilter').value : 'all';
    
    filtered.forEach(t => {
        totalAmount += t.amount;
    });

    const resultDiv = document.querySelector('.table-rejalt');
    
    if (resultDiv) {
        if (selectedCategory === 'all') {
            const netBalanceText = document.querySelector('.card1 p') ? document.querySelector('.card1 p').innerText.replace('‡ß≥ ', '') : '0';
            const netBalance = parseFloat(netBalanceText) || 0;
            resultDiv.innerText = `‡ß≥ ${netBalance.toFixed(0)}`;
        } 
        else {
            resultDiv.innerText = `‡ß≥ ${totalAmount.toFixed(0)}`;
        }
    }
}


function saveTransaction(type) {
    // ‚ö†Ô∏è ‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶ø‡¶§: ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ database ‡¶è‡¶¨‡¶Ç transactionsRef ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤ ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá
    if (typeof firebase === 'undefined' || !database || !transactionsRef) {
        alert("Firebase ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶®‡¶Ø‡¶º‡•§ ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶¨‡¶æ ‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§");
        console.error("Firebase/Database not ready for transaction.");
        return;
    }
    
    const isEditing = isEditingIndex !== null;
    
    const amountInput = document.getElementById(`${type === 'in' ? 'inAmount' : 'outAmount'}`);
    const descriptionInput = document.getElementById(`${type === 'in' ? 'inDescription' : 'outDescription'}`);
    const categoryInput = document.getElementById(`${type === 'in' ? 'incategory' : 'outcategory'}`); 
    const personInput = document.getElementById(`${type === 'in' ? 'inperson' : 'outperson'}`);     
    const selectedTime = document.getElementById(`showTime${type === 'in' ? 'In' : 'Out'}`).innerText; 
    const selectedDate = document.getElementById(`showDate${type === 'in' ? 'In' : 'Out'}`).innerText; 
    const amount = parseFloat(amountInput.value);
    
    let categoryValue = categoryInput ? categoryInput.value : (type === 'in' ? '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶Ü‡ßü' : '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶ñ‡¶∞‡¶ö');
    let personValue = personInput ? personInput.value : '‡¶®‡¶ó‡¶¶';
    let descriptionValue = descriptionInput.value || (type === 'in' ? '‡¶ú‡¶Æ‡¶æ' : '‡¶ñ‡¶∞‡¶ö');

    if (isNaN(amount) || amount <= 0) {
        alert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§");
        return;
    }
    
    if (type === 'out' && categoryValue === 'üíµSalaryüí∂') {
        const salaryEmployeeSelect = document.getElementById('salaryEmployeeSelect');
        if (salaryEmployeeSelect && !salaryEmployeeSelect.value) { // <--- ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶® ‡¶´‡¶ø‡¶ï‡ßç‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá
             alert("‡¶¨‡ßá‡¶§‡¶® ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶∞‡ßç‡¶Æ‡¶ö‡¶æ‡¶∞‡ßÄ‡¶ï‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
             return; 
        }
        if (salaryEmployeeSelect && salaryEmployeeSelect.value) {
            const selectedEmployeeOption = salaryEmployeeSelect.options[salaryEmployeeSelect.selectedIndex].textContent;
            descriptionValue = `‡¶¨‡ßá‡¶§‡¶®: ${selectedEmployeeOption} - ${descriptionValue}`; 
        }
    }

    let transactionId;
    let timestampValue;

    if (isEditing) {
        // ‡¶è‡¶°‡¶ø‡¶ü ‡¶Æ‡ßã‡¶°‡ßá ‡¶•‡¶æ‡¶ï‡¶≤‡ßá, ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶á‡¶Æ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
        transactionId = transactions[isEditingIndex].id; 
        timestampValue = transactions[isEditingIndex].timestamp;
    } else {
        // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶π‡¶≤‡ßá, Firebase-‡¶è‡¶∞ push() ‡¶¶‡¶ø‡ßü‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶®‡¶ø‡¶ï ID ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
        transactionId = transactionsRef.push().key; 
        // ServerValue.TIMESTAMP ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶° ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶ü‡¶æ‡¶á‡¶Æ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™ ‡¶¶‡ßá‡¶¨‡ßá
        timestampValue = window.firebaseServerTimestamp; 
    }

    const newTransaction = {
        type: type,
        amount: amount,
        description: descriptionValue,
        time: selectedTime, 
        category: categoryValue, 
        person: personValue, 
        date: selectedDate, 
        timestamp: timestampValue // Firebase Server Timestamp
    };
    
    // Firebase-‡¶è ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶¨‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
    transactionsRef.child(transactionId).set(newTransaction)
    .then(() => {
        closeForm();
        alert("‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!"); // ‡¶∏‡¶æ‡¶´‡¶≤‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ
    })
    .catch((error) => {
        alert("‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá: " + error.message);
        console.error("Firebase Save Error:", error);
    });
    
}
  
function saveIn() {
    saveTransaction('in');
}
function saveOut() {
    saveTransaction('out');
}


function editTransaction(index) {
    // index ‡¶ü‡¶ø ‡¶π‡¶≤ filteredTransactions ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶∞ index
    const tFiltered = getFilteredTransactions()[index];
    if (!tFiltered) { console.error("Invalid filtered transaction index:", index); return; }
    
    // ‡¶Ü‡¶∏‡¶≤ transactions ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶§‡ßá ‡¶§‡¶æ‡¶∞ index ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶æ
    const originalIndex = transactions.findIndex(tx => tx.id === tFiltered.id);
    const t = transactions[originalIndex];

    if (!t) { console.error("Transaction not found in main array:", originalIndex); return; }

    isEditingIndex = originalIndex; 
    
    // ... (‡¶´‡¶∞‡ßç‡¶Æ ‡¶ñ‡ßã‡¶≤‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) ...
    const type = t.type;
    document.getElementById("formContainer").style.display = "flex";
    
    const TypeCapital = type === 'in' ? 'In' : 'Out';
    if (type === "in") {
        document.getElementById("formIn").style.display = "block";
        document.getElementById("formOut").style.display = "none";
    } else {
        document.getElementById("formIn").style.display = "none";
        document.getElementById("formOut").style.display = "block";
    }
    
    document.getElementById(`${type}Amount`).value = t.amount;
    document.getElementById(`${type}Description`).value = t.description;
    
    const categorySelect = document.getElementById(`${type}category`);
    if (categorySelect) {
        categorySelect.value = t.category;
        if (type === 'out' && t.category === 'üíµSalaryüí∂') {
            const employeeSelectContainer = document.getElementById('salaryEmployeeSelectContainer');
            if (employeeSelectContainer) employeeSelectContainer.style.display = 'block';
        }
    }
    
    const personSelect = document.getElementById(`${type}person`);
    if (personSelect) personSelect.value = t.person;
    
    let time24hr;
    let [timeStr, ampm] = t.time.split(' '); 
    
    if (ampm) { 
        let [hour, minute] = timeStr.split(':');
        hour = parseInt(hour);
        if (ampm === 'PM' && hour !== 12) hour += 12;
        if (ampm === 'AM' && hour === 12) hour = 0;
        time24hr = `${String(hour).padStart(2, '0')}:${minute}`;
    } else {
        time24hr = t.time.substring(0, 5);
    }
    
    const timePicker = document.getElementById(`timePicker${TypeCapital}`);
    if (timePicker) timePicker.value = time24hr;
    const showTime = document.getElementById(`showTime${TypeCapital}`);
    if (showTime) showTime.innerText = t.time;
    
    const datePicker = document.getElementById(`datePicker${TypeCapital}`);
    if (datePicker) datePicker.value = t.date;
    const showDate = document.getElementById(`showDate${TypeCapital}`);
    if (showDate) showDate.innerText = t.date;
    
    const saveBtn = document.getElementById(`${t.type}SaveBtn`);
    if (saveBtn) saveBtn.innerText = 'Update';
}


function deleteTransaction(index) {
    if (typeof firebase === 'undefined' || !transactionsRef) {
        alert("Firebase ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶®‡¶Ø‡¶º‡•§");
        return;
    }
    if (!confirm("‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶á ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")) { return; }
    
    // index ‡¶ü‡¶ø ‡¶π‡¶≤ filteredTransactions ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶∞ index
    const transactionToDelete = getFilteredTransactions()[index];

    if (!transactionToDelete || !transactionToDelete.id) {
        console.error("‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§");
        return;
    }
    
    // Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ
    transactionsRef.child(transactionToDelete.id).remove() // <--- transactionsRef ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá
    .then(() => {
        // ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤‡¶ü‡¶æ‡¶á‡¶Æ ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá‡•§
        console.log("Transaction successfully deleted from Firebase.");
    })
    .catch((error) => {
        alert("‡¶°‡ßá‡¶ü‡¶æ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá: " + error.message);
        console.error("Firebase Delete Error:", error);
    });
}


// =======================================================
// === ‡ßÆ. ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ UI-‡¶§‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá) ===
// =======================================================
function displayTransactions() {
    const tableBody = document.getElementById('transactionBody');
    const paginationControls = document.querySelector('.pagination-controls'); 
    let listHTML = ``;
    
    const filteredTransactions = getFilteredTransactions();
    const totalTransactions = filteredTransactions.length;
    
    const start = (currentPage - 1) * rowsPerPage;
    const end = start + rowsPerPage;
    const paginatedItems = filteredTransactions.slice(start, end);

    if (paginatedItems.length === 0 && totalTransactions > 0) {
        currentPage = Math.max(1, Math.ceil(totalTransactions / rowsPerPage));
        displayTransactions(); 
        return;
    }
    
    if (totalTransactions === 0) {
        listHTML = `<p style="text-align: center; color: #888; padding: 20px;">‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§</p>`;
        tableBody.innerHTML = listHTML;
        if(paginationControls) paginationControls.innerHTML = '';
        return; 
    }

    paginatedItems.forEach((t, index) => {
        const amountClass = t.type === 'in' ? 'amount-in' : 'amount-out';
        const sign = t.type === 'in' ? '+' : '-';
   
        let customStyle = '';
        if (t.type === 'in' && t.category === loanTakenCategory) {
            customStyle = 'style="color: #5d30d9;"'; 
        }
        if (t.type === 'out' && t.category === loanGivenCategory) {
            customStyle = 'style="color: #dd3be3;"'; 
        }
       else if (t.type === 'in' && t.person === kingBankCategory) { 
             customStyle = 'style="color: #007bff; font-weight: bold;"'; 
        }
        
        // originalIndex ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶®‡ßá‡¶á, ‡¶ï‡¶æ‡¶∞‡¶£ edit/delete filtered array-‡¶è‡¶∞ index ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá
        const displayIndex = start + index; // paginated array ‡¶è‡¶∞ index

        listHTML += `
            <div class="transaction-item">
                <div>${t.date || '‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶®‡ßá‡¶á'}</div>
                <div>${t.time || '--:--'}</div> 
                <div>${t.category || 'not select'}</div> 
                <div>${t.person || 'not select'}</div> 
                <div>${t.description}</div> 
                <div class="${amountClass}"${customStyle}>
                    ${sign} ‡ß≥ ${t.amount.toFixed(0)}
                </div>
                <div class="action-buttons">
                    <button onclick="editTransaction(${displayIndex})" class="edit-btn">Edit</button>
                    <button onclick="deleteTransaction(${displayIndex})" class="delete-btn">Delete</button>
                </div> 
            </div>
        `;
    });

    tableBody.innerHTML = listHTML;
    
    if(paginationControls) {
        setupPagination(); 
    }
}


// =======================================================
// === ‡ßØ. ‡¶™‡ßá‡¶ú‡¶ø‡¶®‡ßá‡¶∂‡¶® ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡ßü‡¶®‡¶ø) ===
// =======================================================
function setupPagination() {
    const filteredTransactions = getFilteredTransactions();
    const totalPages = Math.ceil(filteredTransactions.length / rowsPerPage);
    const paginationContainer = document.querySelector('.pagination-controls');
    
    if (!paginationContainer) return; 

    paginationContainer.innerHTML = ''; 

    if (totalPages === 0) return; 

    const maxPagesToShow = 5; 
    let startPage, endPage;

    if (totalPages <= maxPagesToShow) {
        startPage = 1;
        endPage = totalPages;
    } else {
        const middle = Math.ceil(maxPagesToShow / 2);
        
        if (currentPage <= middle) {
            startPage = 1;
            endPage = maxPagesToShow;
        } else if (currentPage + middle > totalPages) {
            startPage = totalPages - maxPagesToShow + 1;
            endPage = totalPages;
        } else {
            startPage = currentPage - middle + 1;
            endPage = currentPage + middle - 1;
        }
    }

    const prevButton = createPaginationButton('<<', currentPage - 1);
    if (currentPage === 1) {
        prevButton.classList.add('disabled-nav'); 
    }
    paginationContainer.appendChild(prevButton);

    const pageOneButton = createPaginationButton(1, 1);
    if (currentPage === 1) pageOneButton.classList.add('active-page');
    paginationContainer.appendChild(pageOneButton);

    if (startPage > 2) {
        paginationContainer.appendChild(createEllipsis());
    }

    let loopStart = Math.max(2, startPage);
    let loopEnd = endPage;
    
    if (totalPages > 1) {
        loopEnd = Math.min(endPage, totalPages - 1); 
    }
    
    for (let i = loopStart; i <= loopEnd; i++) {
        
        const button = createPaginationButton(i, i);
        if (i === currentPage) {
           button.classList.add('active-page'); 
        }
        paginationContainer.appendChild(button);
    }

    if (loopEnd < totalPages - 1) { 
        paginationContainer.appendChild(createEllipsis());
    }
    
    if (totalPages > 1 && totalPages > loopEnd) {
        const lastPageButton = createPaginationButton(totalPages, totalPages);
        if (currentPage === totalPages) {
            lastPageButton.classList.add('active-page');
        }
        paginationContainer.appendChild(lastPageButton);
    }

    const nextButton = createPaginationButton('>>', currentPage + 1);
    if (currentPage === totalPages) {
        nextButton.classList.add('disabled-nav'); 
    }
    paginationContainer.appendChild(nextButton);
}


function createPaginationButton(text, page) {
    const link = document.createElement('a'); 
    link.innerText = text;
    link.href = '#';
    link.classList.add('page-link'); 
    link.setAttribute('data-page', page);
    
    link.addEventListener('click', (e) => {
        if (link.classList.contains('disabled-nav')) {
            e.preventDefault();
            return;
        }
        e.preventDefault(); 
        changePage(page);
    });
    
    if (isNaN(parseInt(text))) {
        link.classList.add('nav-button');
    }
    return link;
}

function createEllipsis() {
    const span = document.createElement('span');
    span.innerText = '...';
    span.classList.add('ellipsis');
    return span;
}

function changePage(page) {
    const totalItems = getFilteredTransactions().length; 
    const newTotalPages = Math.ceil(totalItems / rowsPerPage);
    
    if (page >= 1 && page <= newTotalPages) {
        currentPage = page; 
        
        displayTransactions();
        setupPagination();
    }
}


function changeRowsPerPage(newRowsPerPage) {
    rowsPerPage = parseInt(newRowsPerPage); 
    currentPage = 1; 
    
    displayTransactions();
    setupPagination();
}

function filterByCategory() {
 
    currentPage = 1;
    displayTransactions(); 
    setupPagination();
    updateResultAmount(); 
}

const outCategorySelect = document.getElementById('outcategory');
if (outCategorySelect) {
    outCategorySelect.addEventListener('change', toggleSalaryEmployeeSelect);
}


// =======================================================
// === ‡ßß‡ß¶. ‡¶ï‡¶≤‡¶æ‡¶Æ ‡¶ü‡¶ó‡¶≤ ‡¶ì ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡ßü‡¶®‡¶ø) ===
// =======================================================

document.getElementById('columnDropdown').addEventListener('change', function(event) {
    if (event.target.type === 'checkbox') {
        const columnIndex = event.target.dataset.column;
        const columnClass = `hidden-col-${columnIndex}`;
        
        const header = document.querySelector('.transaction-table-header');
        const bodyRows = document.querySelectorAll('#transactionBody .transaction-item');

        if (event.target.checked) {
            header.classList.remove(columnClass);
            bodyRows.forEach(row => row.classList.remove(columnClass));
        } else {
            header.classList.add(columnClass);
            bodyRows.forEach(row => row.classList.add(columnClass));
        }
    }
});

document.getElementById('toggleColumnsBtn').addEventListener('click', function() {
    const dropdown = document.getElementById('columnDropdown');
    
    if (dropdown.style.display === 'block') {
        dropdown.style.display = 'none';
    } else {
        dropdown.style.display = 'block';
    }
});

document.addEventListener('click', function(event) {
    const dropdown = document.getElementById('columnDropdown');
    const button = document.getElementById('toggleColumnsBtn');
    
    if (dropdown && button && dropdown.style.display === 'block' && event.target !== dropdown && event.target !== button) {
         dropdown.style.display = 'none';
    }
});

document.querySelectorAll('#transactionBody > div').forEach(function(el) {
    if (!el.classList.contains('transaction-item')) {
        el.classList.add('transaction-item');
    }
});


// =======================================================
// === ‡ßß‡ßß. ‡¶°‡ßç‡¶∞‡¶™‡¶°‡¶æ‡¶â‡¶® ‡¶™‡ßÇ‡¶∞‡¶£‡ßá‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡ßü‡¶®‡¶ø) ===
// =======================================================

function populateFormSelects() {
    populateSelect('incategory', IN_CATEGORIES_HTML, false, '‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü üî¨');
    populateSelect('inperson', IN_PERSONS_HTML, false, '‡¶ú‡¶Æ‡¶æüí∞‡¶ï‡¶∞‡¶æ');
    
    populateSelect('outcategory', OUT_CATEGORIES, false, '‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞üõçÔ∏è‡¶∏‡¶¶‡¶æ‡¶á');
    populateSelect('outperson', OUT_PERSONS, false, cashOutPerson);
}


function loadSelectOptions() {
    EMPLOYEES_LIST = loadEmployeesFromDatabase(); 
    
    populateFormSelects(); 
    
    populateSalaryEmployeeSelect(); 
    
    const allCategories = [...IN_CATEGORIES_HTML, ...OUT_CATEGORIES];
    populateSelect('categoryFilter', allCategories, true); 
}

function populateSelect(elementId, optionsArray, isFilter = false, defaultValue = '') {
    const selectElement = document.getElementById(elementId);
    if (!selectElement) return;

    if (!isFilter) {
         selectElement.innerHTML = '';
    }
    
    const existingOptions = Array.from(selectElement.options).map(opt => opt.value);
    
    optionsArray.forEach(optionValue => {
        if (!existingOptions.includes(optionValue) || !isFilter) {
            const option = document.createElement('option');
            option.value = optionValue;
            option.textContent = optionValue;
            selectElement.appendChild(option);
        }
    });
    
    if (defaultValue && selectElement.querySelector(`option[value="${defaultValue}"]`)) {
        selectElement.value = defaultValue;
    } else if (selectElement.options.length > 0) {
        selectElement.selectedIndex = 0;
    }
}


// =======================================================
// === ‡ßß‡ß®. ‡¶°‡ßá‡¶ü ‡¶∞‡ßá‡¶û‡ßç‡¶ú ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ UI/UX ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡ßü‡¶®‡¶ø) ===
// =======================================================

function openDateRangeModal() {
    document.getElementById('dateRangeModal').style.display = 'flex';
    
    const startDateInput = document.getElementById('startDateFilter');
    const endDateInput = document.getElementById('endDateFilter');
    const dateFilterBtn = document.getElementById('dateFilterBtn');
    
    if (dateFilterBtn.dataset.startDate) {
        startDateInput.value = dateFilterBtn.dataset.startDate;
        endDateInput.value = dateFilterBtn.dataset.endDate;
    } else {
        startDateInput.value = '';
        endDateInput.value = '';
    }
}

function setDateRangeAndFilter() {
    const startDateInput = document.getElementById('startDateFilter');
    const endDateInput = document.getElementById('endDateFilter');
    const dateFilterBtn = document.getElementById('dateFilterBtn');
    const clearDateBtn = document.getElementById('clearDateBtn');
    
    const startDateVal = startDateInput.value;
    const endDateVal = endDateInput.value;
    
    if (startDateVal || endDateVal) {
        
        dateFilterBtn.dataset.startDate = startDateVal;
        dateFilterBtn.dataset.endDate = endDateVal;
        
        dateFilterBtn.classList.add('filter-active'); 
        
        if (clearDateBtn) {
           clearDateBtn.style.display = 'inline-block'; 
        }
        
        const dateRangeModal = document.getElementById('dateRangeModal');
        if(dateRangeModal) dateRangeModal.style.display = 'none';
        
        applyFilters(); 
        
    } else {
        clearDateRange();
        
        const dateRangeModal = document.getElementById('dateRangeModal');
        if(dateRangeModal) dateRangeModal.style.display = 'none';
    }
    
}

function clearDateRange() {
    const dateFilterBtn = document.getElementById('dateFilterBtn');
    const clearDateBtn = document.getElementById('clearDateBtn');
    
    dateFilterBtn.dataset.startDate = '';
    dateFilterBtn.dataset.endDate = '';

    dateFilterBtn.classList.remove('filter-active');

    if (clearDateBtn) {
        clearDateBtn.style.display = 'none';
    }
    
    applyFilters(); 
}


// =======================================================
// === ‡ßß‡ß©. ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶≤‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ (Firebase Listener ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá) ===
// =======================================================

window.onload = function() {
    // ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶Ø‡¶¶‡¶ø Firebase ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá ‡¶•‡¶æ‡¶ï‡ßá
    if (typeof firebase !== 'undefined' && transactionsRef) {
        
        // Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶°‡ßá‡¶ü‡¶æ ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤‡¶ü‡¶æ‡¶á‡¶Æ‡ßá ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
        transactionsRef.on('value', (snapshot) => {
            const fetchedData = snapshot.val();
            
            // ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶§‡ßá ‡¶∞‡ßÇ‡¶™‡¶æ‡¶®‡ßç‡¶§‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø‡¶§‡ßá Firebase key (id) ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ
            transactions = fetchedData ? 
                Object.keys(fetchedData).map(key => ({ ...fetchedData[key], id: key })) 
                : []; 
            
            // **‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ**
            calculateAndDisplayBalance();
            loadSelectOptions(); 
            
            const rowsSelect = document.getElementById('rowsPerPageSelect');
            if (rowsSelect) {
              rowsPerPage = parseInt(rowsSelect.value); 
            }
            
            displayTransactions(); // ‡¶°‡ßá‡¶ü‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá
            setupPagination();
            updateResultAmount(); // ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        });
    } else {
         // ‡¶Ø‡¶¶‡¶ø Firebase ‡¶≤‡ßã‡¶° ‡¶®‡¶æ ‡¶π‡ßü ‡¶§‡¶¨‡ßá ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶´‡¶≤‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)
         console.warn("Firebase ‡¶≤‡ßã‡¶° ‡¶®‡¶æ ‡¶π‡¶ì‡ßü‡¶æ‡ßü ‡¶°‡ßá‡¶ü‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶∏‡¶Æ‡ßç‡¶≠‡¶¨ ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ‡•§");
    }

    const now = new Date();
    const today = now.toISOString().substring(0, 10);
    
    // Date/Time UI ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ 
    const datePickerIn = document.getElementById("datePickerIn");
    if(datePickerIn) datePickerIn.value = today;
    const showDateIn = document.getElementById("showDateIn");
    if(showDateIn) showDateIn.innerText = today;
    
    const datePickerOut = document.getElementById("datePickerOut");
    if(datePickerOut) datePickerOut.value = today;
    const showDateOut = document.getElementById("showDateOut");
    if(showDateOut) showDateOut.innerText = today;

    clearDateRange(); 
};
</script>
</body>
</html>


