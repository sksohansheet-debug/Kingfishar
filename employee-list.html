<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡¶ï‡¶∞‡ßç‡¶Æ‡¶ö‡¶æ‡¶∞‡ßÄ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ------------------------------------------------------------------ */
    /* ‡ßß. ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶æ‡¶†‡¶æ‡¶Æ‡ßã CSS (‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã‡¶á ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶≤‡ßã) */
    /* ------------------------------------------------------------------ */
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: #f5f7fa;
      color: #333;
    }
    .navbar {
      display: flex;
      align-items: center;
      justify-content: center;
      background: white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      padding: 15px 20px;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 10;
    }
    .menu-icon {
      position: absolute;
      left: 20px;
      font-size: 22px;
      cursor: pointer;
    }
    .navbar h1 {
      font-size: 25px;
      margin: 0;
      font-weight: 700;
    }
    .main-content {
      margin-top: 90px;
      padding: 20px;
      display: flex;
      flex-direction: column;
    }
    
    /* Sidebar */
    .sidebar {
      position: fixed;
      top: 65px;
      left: -260px;
      width: 230px;
      height: 100%;
      background: #9CC6ED;
      transition: 0.3s;
      padding-top: 20px;
      z-index: 9;
    }
    .sidebar.open {
      left: 0;
    }
    .sidebar a {
      display: block;
      padding: 15px 20px;
      color: black;
      text-decoration: none;
      font-size: 16px;
      transition: 0.2s;
    }
    .sidebar a:hover {
      background: #87b8e0;
    }

    /* Add Button */
    .Add-Pepoles {
         width: 100%;
         display: flex;
         justify-content: flex-end;
         margin-top: -30px; 
         margin-right: 15px; 
         margin-bottom: 20px;
    }
    .Add-Pepole {
        background-color: blue; 
        color: white; 
        border: none;
        border-radius: 5px; 
        padding: 8px 15px;
        cursor: pointer;
        font-size: 15px;
        font-weight: bold;
        height: 35px;
        width: 100px;
    }
        
    /* --- Modal Styles --- */
    .modal {
      display: none; 
      position: fixed; 
      z-index: 20; 
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.4); 
    }
    .modal-content {
      background-color: #fefefe;
      margin: 10% auto;
      padding: 25px;
      border: 1px solid #888;
      width: 90%; 
      max-width: 500px;
      border-radius: 8px;
      box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    }
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    
    /* Form Grid Layout */
    .modal-content h3 {
      grid-column: 1 / 3; 
      text-align: center;
      margin-top: 20px;
      margin-bottom: 25px; 
      border-bottom: 2px solid #eee; 
      padding-bottom: 10px;
    }
    .modal-content form {
        display: grid;
        grid-template-columns: 140px 1fr;
        gap: 15px;
        align-items: center; 
    }
    .modal-content input[type="text"],
    .modal-content input[type="email"],
    .modal-content input[type="tel"],
    .modal-content input[type="number"],
    .modal-content input[type="date"],
    .modal-content select,
    .modal-content textarea {
        width: 95%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }
    .modal-content textarea {
        grid-column: 2 / 3;
        height: 60px;
        resize: vertical;
    }
    .modal-content input[type="file"],
    .modal-content button[type="submit"] {
        grid-column: 1 / 3; 
        width: 95%;
        margin-left: 2%; 
    }
    .modal-content button[type="submit"] {
        display: block;
        margin: 20px auto 0 auto;
        width: 50%; 
        padding: 10px;
        background-color: blue;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
    }
    .modal-content br {
        display: none; 
    }


    /* ------------------------------------------------------------------ */
    /* ‡ß®. ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏ CSS (‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã‡¶á ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶≤‡ßã) */
    /* ------------------------------------------------------------------ */

    /* ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡¶ï‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ */
    .table-responsive {
        width: 100%;
        overflow-x: auto; 
        -webkit-overflow-scrolling: touch; 
    }
    
    /* ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
    .employee-table {
        min-width: 750px; 
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        border-radius: 8px;
        overflow: hidden;
    }

    .employee-table th, .employee-table td {
        padding: 12px 10px;
        border: 1px solid #ddd;
        text-align: left;
        vertical-align: middle; 
        font-size: 14px;
    }
    
    /* ‡¶ï‡¶≤‡¶æ‡¶Æ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£ */
    .employee-table th:nth-child(1), .employee-table td:nth-child(1) { width: 5%; } 
    .employee-table th:nth-child(2), .employee-table td:nth-child(2) { width: 8%; } 
    .employee-table th:nth-child(3), .employee-table td:nth-child(3) { width: 20%; } 
    .employee-table th:nth-child(4), .employee-table td:nth-child(4) { width: 15%; } 
    .employee-table th:nth-child(5), .employee-table td:nth-child(5) { width: 15%; } 
    .employee-table th:nth-child(6), .employee-table td:nth-child(6) { width: 15%; } 
    .employee-table th:nth-child(7), .employee-table td:nth-child(7) { width: 20%; } 


    .employee-table th {
        background-color: #f2f2f2;
        font-weight: bold;
    }

    .employee-table tr:nth-child(even) {
        background-color: #f9f9f9;
    }

    /* ‡¶¨‡ßá‡¶§‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
    .status-paid {
        background-color: #d4edda;
        color: #155724;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: bold;
        display: inline-block;
        font-size: 12px;
    }
    .status-pending {
        background-color: #fff3cd;
        color: #856404;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: bold;
        display: inline-block;
        font-size: 12px;
    }
    .status-advance {
        background-color: #f8d7da;
        color: #721c24;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: bold;
        display: inline-block;
        font-size: 12px;
    }
    
    /* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
    .action-buttons button {
        background-color: #007bff; 
        color: white;
        border: none;
        padding: 5px 8px;
        border-radius: 4px;
        cursor: pointer;
        margin-right: 5px;
        font-size: 14px;
        white-space: nowrap; 
    }

    .action-buttons button.delete-btn {
        background-color: red; 
    }

    /* ‡¶õ‡¶¨‡¶ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
    .profile-img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
        border: 1px solid #ccc;
        display: block;
        margin: auto;
    }

    /* ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏ ‡¶Æ‡ßã‡¶°‡¶æ‡¶≤ ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
    .detail-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px dashed #eee;
        font-size: 14px;
    }

    .detail-item strong {
        color: #0056b3;
    }
    .detail-item span {
        font-weight: 500;
        text-align: right;
    }
  </style>
</head>
<body>
  
  <div class="navbar">
    <span class="menu-icon" onclick="toggleSidebar()">‚ò∞</span>
    <h1>Company People</h1>
  </div>

  <div id="sidebar" class="sidebar">
    <a href="index.html">üè† ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</a>
    <a href="hisab.html">üí∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶∞‡¶æ‡¶ñ‡¶æ</a>
    <a href="employee-list.html">üßë‚Äçü§ù‚Äçüßë Company People</a>
     <a href="invoice.html">üìë ‡¶¨‡¶ø‡¶≤ invoice</a>
  </div>

  <div class="main-content">
    
    <div class="header-content">
        <h2>üë®‚Äçüíº ‡¶ï‡¶∞‡ßç‡¶Æ‡¶ö‡¶æ‡¶∞‡ßÄ‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h2>
        <p>‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ï‡¶∞‡ßç‡¶Æ‡¶ö‡¶æ‡¶∞‡ßÄ‡¶¶‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá‡•§</p>
    </div>
    
    <div class="Add-Pepoles">
      <button class="Add-Pepole" onclick="openForm()">Add‚ûï</button>
    </div>
    
    <div id="employeeListContainer">
      </div>
  </div>
      
    
  <div id="addFormModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeForm()">&times;</span>
      <h3>Add People</h3>
    
      <form id="employeeForm"> 
        
        <label for="name">‡¶®‡¶æ‡¶Æ:</label>
        <input type="text" id="name" name="name" placeholder="‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶æ‡¶Æ" required>
        
        <label for="mobileNo">‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞:</label>
        <input type="tel" id="mobileNo" name="mobileNo" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞" required>
        
        <label for="salary">‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶¨‡ßá‡¶§‡¶®:</label>
        <input type="number" id="salary" name="salary" placeholder="‡¶¨‡ßá‡¶§‡¶® (‡¶ü‡¶æ‡¶ï‡¶æ)" required>
        
        <button type="submit" id="submitBtn">‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
      </form>
    
    
    </div>
  </div>
  
  
  <div id="detailsModal" class="modal">
    <div class="modal-content" style="max-width: 400px;">
      <span class="close" onclick="closeDetailsModal()">&times;</span>
      <h3 style="margin-top: 10px;">‡¶ï‡¶∞‡ßç‡¶Æ‡¶ö‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶•‡ßç‡¶Ø</h3>
      <div id="employeeDetailsDisplay">
          </div>
      <button onclick="closeDetailsModal()" style="display: block; width: 100%; margin-top: 20px; background: #6c757d;">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>
  </div>


<script>
  
  // Modal ‡¶è‡¶¨‡¶Ç Sidebar ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
  function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('open');
  }

  function openForm() {
    document.getElementById("addFormModal").style.display = "block";
  }

  function closeForm() {
    document.getElementById("addFormModal").style.display = "none";
    document.getElementById('employeeForm').reset();
  }
  
  function closeDetailsModal() {
    document.getElementById("detailsModal").style.display = "none";
  }

  window.onclick = function(event) {
    const modal = document.getElementById("addFormModal");
    const detailsModal = document.getElementById("detailsModal");
    if (event.target === modal) {
      closeForm();
    }
    if (event.target === detailsModal) {
      closeDetailsModal();
    }
  }

  // ‚≠ê ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶¨-‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‚≠ê
  function saveAndReload(employee) {
    
    let employees = JSON.parse(localStorage.getItem('employees')) || [];
    
    // ‡¶®‡¶§‡ßÅ‡¶® ID ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ 
    const newId = employees.length > 0 ? Math.max(...employees.map(e => e.id || 0)) + 1 : 101;
    employee.id = newId;

    // ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶Ø‡ßá 'salary' ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶∏‡ßá‡¶≠ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
    employee.salary = parseFloat(employee.salary) || 0; 
    
    // ‡¶∏‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡¶ø ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤‡¶æ‡¶á‡¶ú ‡¶ï‡¶∞‡¶æ
    employee.salaryPaid = parseFloat(employee.salaryPaid) || 0; 
    employee.lastPaidDate = employee.lastPaidDate || null;
    
    // ‡¶¨‡¶æ‡¶¶ ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ ‡¶´‡¶ø‡¶≤‡ßç‡¶°‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶§‡ßá ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶™‡ßá‡¶ú‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶®‡¶æ ‡¶π‡ßü (‡¶Ø‡ßá‡¶Æ‡¶®: designation)
    employee.designation = 'General Employee'; 
    employee.photoDataUrl = '';
    employee.joiningDate = new Date().toISOString().slice(0, 10); // ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ

    employees.push(employee);
    
    try {
        localStorage.setItem('employees', JSON.stringify(employees));
        alert('‡¶ï‡¶∞‡ßç‡¶Æ‡¶ö‡¶æ‡¶∞‡ßÄ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!'); 
        closeForm(); 
        loadEmployeeList(); 
    } catch (e) {
        // ‡¶Ø‡¶¶‡¶ø ‡¶è‡¶ñ‡¶®‡¶ì Local Storage ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø ‡¶Ü‡¶∏‡ßá, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶∏‡¶æ‡¶á‡¶ú ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§
        alert('Local Storage ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ö‡¶∞‡¶Æ ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶ì ‡¶ï‡ßÅ‡¶ï‡¶ø‡¶ú ‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
        console.error(e);
    }
  }

  // ‚≠ê ‡¶´‡¶∞‡ßç‡¶Æ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶® ‡¶è‡¶¨‡¶Ç ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ (‡¶õ‡¶¨‡¶ø ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶´‡¶ø‡¶ï‡ßç‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã) ‚≠ê
  const form = document.getElementById('employeeForm');
  
  form.addEventListener('submit', function(event) {
    event.preventDefault(); 

    if (!form.checkValidity()) {
        const firstInvalid = form.querySelector(':invalid');
        if (firstInvalid) {
            firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
            firstInvalid.focus();
        }
        return; 
    }
    
    const employee = {};
    const formData = new FormData(form);
    
    for (const [key, value] of formData.entries()) {
        employee[key] = value;
    }
    
    // ‡¶õ‡¶¨‡¶ø ‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° ‡¶¨‡¶æ‡¶¶ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶Ü‡¶õ‡ßá, ‡¶è‡¶ñ‡¶® ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
    saveAndReload(employee);
  });

  // ‚≠ê ‡¶¨‡ßá‡¶§‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶∂‡¶® ‡¶è‡¶¨‡¶Ç ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‚≠ê
  function getSalaryStatus(emp) {
    const today = new Date();
    const salaryAmount = emp.salary || 0; 
    const totalPaid = parseFloat(emp.salaryPaid) || 0; 
    const lastPaidDateStr = emp.lastPaidDate; 
    let status = '';
    const currency = '‡ß≥'; 

    if (salaryAmount === 0) {
        return `${currency}${totalPaid.toFixed(0)} (‡¶¨‡ßá‡¶§‡¶® ‡¶∏‡ßá‡¶ü ‡¶®‡ßá‡¶á)`; 
    }

    if (totalPaid > 0 && lastPaidDateStr) {
        const lastPaymentDate = new Date(lastPaidDateStr);
        const isPaidThisMonth = lastPaymentDate.getMonth() === today.getMonth() && lastPaymentDate.getFullYear() === today.getFullYear();

        if (isPaidThisMonth) {
            if (totalPaid > salaryAmount) {
                 const advanceAmount = totalPaid - salaryAmount;
                 status = `<span class="status-advance">Advance: ${currency}${advanceAmount.toFixed(0)}</span>`;
            } else {
                 status = `<span class="status-paid">Paid (${lastPaymentDate.toLocaleDateString('bn-BD')})</span>`;
            }
        } else if (totalPaid >= salaryAmount) {
            const dueAmount = salaryAmount - totalPaid;
            status = `<span class="status-advance">Advance: ${currency}${Math.abs(dueAmount).toFixed(0)}</span>`;
        } else {
            status = `<span class="status-pending">Due: ${currency}${salaryAmount.toFixed(0)}</span>`;
        }
    } else {
         status = `<span class="status-pending">Due: ${currency}${salaryAmount.toFixed(0)}</span>`;
    }

    return status;
  }
  
  
  // ‚≠ê ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßá ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ‡¶Ø‡¶º ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‚≠ê
  function loadEmployeeList() {
      const employees = JSON.parse(localStorage.getItem('employees')) || []; 
      const listContainer = document.getElementById('employeeListContainer');
      listContainer.innerHTML = ''; 

      if (employees.length === 0) {
          listContainer.innerHTML = '<p style="text-align: center; margin-top: 50px; font-style: italic; color: #777;">‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶∞‡ßç‡¶Æ‡¶ö‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§</p>';
          return;
      }
      
      let tableHTML = `
          <div class="table-responsive"> 
              <table class="employee-table">
                  <thead>
                      <tr>
                          <th>SL</th>
                          <th>‡¶õ‡¶¨‡¶ø</th>
                          <th>‡¶®‡¶æ‡¶Æ</th>
                          <th>‡¶™‡¶¶‡¶¨‡¶ø</th>  
                          <th>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤</th> 
                          <th>‡¶¨‡ßá‡¶§‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</th> <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                      </tr>
                  </thead>
                  <tbody>
      `;
      
      employees.forEach((emp, index) => {
          // ‚úÖ ‡¶´‡¶ø‡¶ï‡ßç‡¶∏: ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶õ‡¶¨‡¶ø URL ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
          const imgSrc = emp.photoDataUrl && emp.photoDataUrl !== 'undefined' ? emp.photoDataUrl : 'https://via.placeholder.com/40?text=P'; 
          
          tableHTML += `
              <tr>
                  <td>${index + 1}</td>
                  <td><img src="${imgSrc}" class="profile-img" alt="${emp.name}"></td>
                  <td>${emp.name || 'N/A'}</td>
                  <td>${emp.designation || 'N/A'}</td> 
                  <td>${emp.mobileNo || 'N/A'}</td>   
                  <td>${getSalaryStatus(emp)}</td>  <td class="action-buttons">
                      <button onclick="showEmployeeDetails(${index})">Details</button>
                      <button class="delete-btn" onclick="deleteEmployee(${index})">Delete</button>
                  </td>
              </tr>
          `;
      });
      
      tableHTML += `
                  </tbody>
              </table>
          </div> 
      `;
      
      listContainer.innerHTML = tableHTML;
  }
  
  // ‚≠ê ‡¶ï‡¶∞‡ßç‡¶Æ‡¶ö‡¶æ‡¶∞‡ßÄ ‡¶Æ‡ßã‡¶õ‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶∂‡¶® ‡¶∏‡¶π) ‚≠ê
  function deleteEmployee(index) {
      if (confirm("‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶è‡¶á ‡¶ï‡¶∞‡ßç‡¶Æ‡ßÄ‡¶ï‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®? ‡¶è‡¶á ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ü‡¶∞ ‡¶´‡¶ø‡¶∞‡ßá ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§")) {
          let employees = JSON.parse(localStorage.getItem('employees')) || [];
          employees.splice(index, 1); 
          localStorage.setItem('employees', JSON.stringify(employees));
          loadEmployeeList(); 
      }
  }

  // ‚≠ê ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶§‡¶•‡ßç‡¶Ø‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶≤‡ßã) ‚≠ê
  function showEmployeeDetails(index) {
      const employees = JSON.parse(localStorage.getItem('employees')) || [];
      const emp = employees[index];
      const displayContainer = document.getElementById('employeeDetailsDisplay');
      
      const imgSrc = emp.photoDataUrl && emp.photoDataUrl !== 'undefined' ? emp.photoDataUrl : 'https://via.placeholder.com/80?text=P'; 
      
      let detailsHTML = `
          <div style="text-align: center; margin-bottom: 20px;">
              <img src="${imgSrc}" class="profile-img" style="width: 80px; height: 80px; margin-bottom: 10px;" alt="${emp.name}">
              <h4 style="margin: 0; color: #007bff;">${emp.name || 'N/A'}</h4>
              <p style="color: #6c757d;">${emp.designation || '‡¶™‡¶¶‡¶¨‡¶ø ‡¶®‡ßá‡¶á'}</p>
          </div>
          
          <div class="detail-item">
              <strong>‡¶®‡¶æ‡¶Æ:</strong> <span>${emp.name || 'N/A'}</span>
          </div>
          <div class="detail-item">
              <strong>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤:</strong> <span>${emp.mobileNo || 'N/A'}</span>
          </div>
          <div class="detail-item">
              <strong>‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶¨‡ßá‡¶§‡¶®:</strong> <span>${emp.salary ? emp.salary + ' ‡¶ü‡¶æ‡¶ï‡¶æ' : 'N/A'}</span>
          </div>
          <div class="detail-item">
              <strong>‡¶Ø‡ßã‡¶ó‡¶¶‡¶æ‡¶® ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</strong> <span>${emp.joiningDate || 'N/A'}</span>
          </div>
          <div class="detail-item">
              <strong>‡¶Æ‡ßã‡¶ü ‡¶¨‡ßá‡¶§‡¶® ‡¶™‡¶∞‡¶ø‡¶∂‡ßã‡¶ß:</strong> <span style="font-weight: bold; color: green;">${emp.salaryPaid ? emp.salaryPaid + ' ‡¶ü‡¶æ‡¶ï‡¶æ' : '‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ'}</span>
          </div>
          <div class="detail-item">
              <strong>‡¶∂‡ßá‡¶∑ ‡¶™‡¶∞‡¶ø‡¶∂‡ßã‡¶ß‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</strong> <span>${emp.lastPaidDate || 'N/A'}</span>
          </div>
          <div class="detail-item">
              <strong>‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏:</strong> <span>${getSalaryStatus(emp)}</span>
          </div>
          
      `;
      
      displayContainer.innerHTML = detailsHTML;
      document.getElementById("detailsModal").style.display = "block";
  }


  // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
  window.onload = function() {
      loadEmployeeList();
  };
  
</script>



  
</body>
</html>


